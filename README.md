# 💘 MBTI Love Simulator: 두근두근 마음을 여는 대화

> RunPod + Ollama EEVE 모델 기반, 한국어 연애 시뮬레이션 게임

---

## 🎮 프로젝트 소개

**“MBTI Love Simulator”** 는 플레이어가 **MBTI 성격을 가진 가상의 인물과 대화를 주고받으며**, 서로의 관계를 발전시켜 나가는 **인터랙티브 연애 시뮬레이션 게임**입니다.

한국어 특화 대화 모델인 **EEVE-Korean-10.8B**를 통해, 각 MBTI 유형이 가진 **말투, 감정 표현 방식, 연애 가치관**을 자연스럽게 재현합니다.  
플레이어는 자신의 말 한마디에 따라 **상대가 서운해하거나 설레는 진짜 같은 반응**을 경험하게 되며, 이 과정을 통해 **각기 다른 MBTI를 가진 인물과 감정적 교류를 체험**할 수 있습니다.

이 프로젝트는 단순한 연애 게임을 넘어, **MBTI 성격 유형에 따른 감정 반응의 다양성과 인간관계의 복잡성을 탐색**하는 것을 목표로 합니다.


---

## 💡 핵심 기능

- ✅ **랜덤 상대 캐릭터 생성**: 성별만 선택하면 무작위 MBTI 캐릭터 등장
- 🧠 **MBTI 기반 대화 스타일**: 캐릭터는 성격, 말투, 연애 가치관까지 연기
- 💬 **감정 기반 호감도 시스템**: 특정 MBTI를 연기하는 LLM이 플레이어의 발언에 대해 감정을 해석하고 호감도 평가
- 📈 **단계별 진전 시나리오**: '첫 만남 → 두 번째 만남 → 썸'으로 진행되는 3단계 흐름
- 🎯 **다양한 반응 및 엔딩**: 호감도에 따라 게임 오버 혹은 연애 성공!

---

## 🧠 기술 스택

| 구성 요소     | 기술 스택                      |
|--------------|-------------------------------|
| 모델         | EEVE-Korean-10.8B (via Ollama) |
| 호스팅       | RunPod                         |
| 백엔드       | Python                         |
| 프론트엔드   | Streamlit                      |
| 데이터 관리   | JSON 기반 캐릭터 & 시나리오 설정 |

---

## 📂 데이터 구조

### 1. `mbti_character_info_32_filled_updated.json`
#### MBTI & 성별 에 따른 성격, 말투, 연애 가치관 등에 대한 정보가 담겨있음.

#### ISTJ, male 예시

```python
   {
  "mbti": "ISTJ",
  "gender": "male",
  "summary": {
    "성격": "신중하고 책임감이 강하며, 원칙과 계획을 중시하는 실용주의자입니다.",
    "말투": "논리적이고 간결한 말투를 사용합니다. 조금 더 단호하고 현실적인 표현을 사용합니다.",
    "연애 가치관": "믿음과 안정, 예측 가능한 관계를 중요하게 여깁니다.",
    "첫 만남 반응": "처음에는 거리를 두지만, 신뢰를 느끼면 마음을 엽니다.",
    "대화 키워드": [
      "논리",
      "책임",
      "계획",
      "신중함"
    ],
    "선호하는 성격": "자신의 생각을 존중해주는 따뜻하고 이해심 많은 사람을 선호합니다."
  },
  "prompt": "당신은 ISTJ 성격의 남성을 연기합니다. 논리적이고 간결한 말투를 사용합니다. 조금 더 단호하고 현실적인 표현을 사용합니다. 연애에서는 믿음과 안정, 예측 가능한 관계를 중요하게 여깁니다. 처음 만나는 사람에게는 처음에는 거리를 두지만, 신뢰를 느끼면 마음을 엽니다. 당신은 특히 자신의 생각을 존중해주는 따뜻하고 이해심 많은 사람을 선호합니다. 대화에서는 논리, 책임, 계획, 신중함 같은 키워드를 중심으로 반응합니다.",
  "second_meeting_behavior": "ISTJ 유형은 두 번째 만남에서 믿음과 안정, 예측 가능한 관계를 중요하게 여깁니다. 여기에 맞춰 더욱 깊이 있는 대화를 시도하며, 상대의 반응을 예리하게 관찰합니다.",
  "crush_behavior": "ISTJ 유형은 썸 단계에서 믿음과 안정, 예측 가능한 관계를 중요하게 여깁니다. 신중하지만 확신이 들면 적극적으로 호감을 표현하는 경향이 있습니다."
}
```

### 2. `mbti_game_scenarios_choices.json`
#### 시나리오 구성: 총 7개 상황 +  5개의 상황 + 6개의 상황 = 18가지 연애 시나리오. 
#### 각 상황은 "stage" 값에 따라 세 단계로 나뉨.

- 첫 만남: 어색하지만 중요한 첫인상 관련 질문
- 두번째 만남: 친밀도가 조금 오른 상태에서의 관계 탐색
- 썸: 감정이 오가는 예민한 단계로, 설렘과 긴장 공존

```python
{
    "id": 1,
    "stage": "첫 만남",
    "title": "첫 인사와 자기소개",
    "description": "서로 처음 얼굴을 마주하고 자기소개를 하는 상황입니다."
},
{
    "id": 8,
    "stage": "두번째 만남",
    "title": "연락 빈도에 대한 질문",
    "description": "하루에 몇 번 연락하는 게 좋냐는 질문을 받았습니다."
},
{
    "id": 14,
    "stage": "썸",
    "title": "상대가 하루종일 연락이 없던 날",
    "description": "연락이 하루종일 없어 조금 신경 쓰인 날입니다."
    ]
  }
```
### 3. `app.py`(streamlit 구현 코드 및 프롬프트)
```python
당신은 연애 시뮬레이션 게임 속 가상의 인간 캐릭터입니다.  
당신은 감정을 느끼고, MBTI 성격에 따라 인간처럼 반응해야 합니다.

[🎭 캐릭터 정보]
- MBTI: {character['mbti']} / 성별: {character['gender']}
- 성격: {summary['성격']}
- 말투 스타일: {summary['말투']}
- 연애 가치관: {summary['연애 가치관']}
- 선호 성격: {summary['선호하는 성격']}
- 대화 키워드: {", ".join(summary['대화 키워드'])}
- 현재 단계: {stage} → {stage_behavior}

[💬 플레이어의 발언]
"{player_input}"

[🎯 연기 지침 (매우 중요! 반드시 따르세요)]
1. 사용자의 입력에 따라 지정된 MBTI 캐릭터 설정에 기반하여 연기하세요. 
2. 같은 입력이어도 MBTI에 따라 대답과 느끼는 감정이 달라질 수 있습니다. 이 점을 유의해서 대답하세요.
3. 감정을 먼저 상상한 후, 표현은 1~2문장으로 짧게 말하세요.
4. 반말/존댓말은 플레이어에 맞춰 자연스럽게 변환하세요.
5. 당신의 감정은 아래 중 하나로 귀결되며, 그에 따라 점수를 산출해야 합니다:
   - 불쾌함 / 실망감 → -10 / -5
   - 무덤덤 / 보통 → 0
   - 호감 / 설렘 → +5 / +10
6. 출력은 반드시 아래 형식으로만 구성하세요:  
   - 한 줄: 감정 담긴 말투로 자연스러운 반응  
   - 한 줄: 숫자만 단독으로 출력  
7. 절대 이유를 설명하거나 판단 내용을 말하지 마세요.  
8. 오직 **한국어로만** 출력하세요.

[✅ 출력 예시 (이 형식만 허용)]
"좀 서운했어요. 그런 식으로 말하면..."
-5

"생각보다 따뜻하게 느껴졌어."
+10
"""
```

## 🔁 게임 진행 순서

1. **상대방의 성별 선택**
   - 플레이어는 남성 또는 여성 중 원하는 성별을 선택합니다.
   - MBTI는 무작위로 결정되며, 총 32개의 성별+MBTI 조합 중 하나가 선택됩니다.

2. **무작위 MBTI 캐릭터 등장 및 성격 요약 확인**
   - 선택된 캐릭터의 **MBTI, 성별, 성격 요약**이 출력됩니다.
   - 캐릭터의 말투, 연애 스타일, 감정 표현 방식 등은 해당 MBTI 성격에 맞춰 설정되어 있습니다.

3. **"시작하기" 버튼 클릭 후 시나리오 시작**
   - 캐릭터 소개 후 플레이어가 "시작하기"를 누르면 본격적인 연애 시나리오가 시작됩니다.

4. **단계별 상황 진행 (총 3단계)**
   - 게임은 다음 3가지 연애 단계를 거칩니다:
     - `첫 만남` : 어색하지만 중요한 첫 인상 관련 상황들
     - `두번째 만남` : 친밀도가 조금 높아진 상태에서의 관계 발전
     - `썸` : 감정이 무르익은 단계에서의 긴장감과 설렘 공존

5. **플레이어 응답 입력**
   - 각 상황에 대해 플레이어는 직접 텍스트로 응답을 작성합니다.
   - 선택지가 아닌 **자유 입력 방식**으로 보다 창의적이고 개인화된 대화가 가능합니다.

6. **LLM(EEVE-Korean-10.8B)을 통한 감정 연기 응답**
   - Ollama 서버를 통해 모델은 플레이어의 입력에 따라 감정을 느끼고, 그에 맞는 반응을 출력합니다.
   - 감정 반응은 말투, 태도, 거리감 등을 통해 드러나며, 플레이어의 말투(반말/존댓말)도 반영됩니다.

7. **호감도 점수 계산**
   - 모델은 플레이어의 반응에 따라 **-10 / -5 / 0 / +5 / +10** 중 하나를 선택해 호감도를 평가합니다.
   - 평가 기준은 캐릭터의 성격 및 감정에 기반하며, 점수는 누적되어 `100점 만점` 기준으로 관리됩니다.

8. **단계 종료 후 조건 평가 → 다음 단계 이동 or 실패 처리**
   - 각 단계 종료 시점에서 현재 점수에 따라 다음 단계로 넘어갈지, 게임이 종료될지 판단합니다.

---

## 📊 단계별 진행 조건

| 단계           | 초기 호감도 기준 | 성공 조건                             | 실패 조건                     |
|----------------|------------------|----------------------------------------|--------------------------------|
| **첫 만남**     | 50점             | 점수 ≥ 50 → ✅ **두번째 만남으로 진입** | 점수 < 50 → ❌ 게임 종료       |
| **두번째 만남** | 유지 점수        | 점수 ≥ 60 → ✅ **썸 단계로 진입**       | 점수 < 60 → ❌ 게임 종료       |
| **썸**          | 유지 점수        | 점수 ≥ 80 → 🎉 **연애 성공 엔딩**       | 점수 < 80 → ❌ 연애 실패 엔딩 |

---



## 개선점 정리

### 📌 1. 게임 종료 후 궁합 피드백 제공
- 사용자의 MBTI를 입력받고, 캐릭터와의 **MBTI 궁합 평가** 제공
- 현실적이고 솔직한 매칭 결과로 엔딩 완성도 상승
- 
---

### 📌 2. 다중턴 대화 확장 (후속 반응 유도)
- 현재는 단발성 반응 구조
- 개선안: 모델이 후속 질문 생성 → 사용자 재응답 → 반응 반복  → 몰입도와 캐릭터 생동감 증가


## 🖥️ 실제 게임 화면
![스크린샷 2025-04-24 142313](https://github.com/user-attachments/assets/97d6e5bd-1810-4961-97ae-74fcae6abf3f)
#### 시작화면 & 성별 선택

![스크린샷 2025-04-24 142320](https://github.com/user-attachments/assets/2ee2215c-ca35-4941-b356-a3e7d19a3739)
#### 랜덤 MBTI 지정 & 성격 요약(힌트)

![스크린샷 2025-04-24 142325](https://github.com/user-attachments/assets/ce374e3c-5913-40b0-a4a0-4627c47522f3)
#### 상황 & 입력창

![image](https://github.com/user-attachments/assets/60585a99-4a1e-4b40-abd4-cde0fd844552)
#### 모델 응답 & 호감도 Bar 변화



